{"openapi":"3.0.0","info":{"title":"namSecure API","version":"1.0.0"},"paths":{"/auth/apple/register":{"post":{"tags":["Auth"],"summary":"Register with Apple","description":"Register a new user account using Apple identity token","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"identity_token":{"type":"string","description":"Apple identity token (1-5000 characters)"},"address":{"type":"string","description":"User address (1-255 characters)"}},"required":["identity_token","address"]}}}},"responses":{"201":{"description":"User registered with Apple successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Registered successfully"},"token":{"type":"string"}}}}}},"400":{"description":"Invalid token or missing fields"},"409":{"description":"Apple account already registered"},"500":{"description":"Internal Server Error"}}}},"/auth/apple/login":{"post":{"tags":["Auth"],"summary":"Login with Apple","description":"Authenticate a user using Apple identity token","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"identity_token":{"type":"string","description":"Apple identity token (1-5000 characters)"}},"required":["identity_token"]}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Login successful"},"token":{"type":"string"}}}}}},"400":{"description":"Invalid token"},"404":{"description":"Apple account not found"},"500":{"description":"Internal Server Error"}}}},"/auth/logout":{"post":{"tags":["Auth"],"summary":"Logout user","description":"Clear authentication cookies and logout the user","responses":{"200":{"description":"User logged out successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Logged out successfully"}}}}}},"500":{"description":"Internal Server Error"}}}},"/auth/register/email-validation":{"get":{"tags":["Auth"],"summary":"Get email validation page","description":"Retrieve email validation information for authenticated user","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"responses":{"200":{"description":"Email validation page","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Email validation required"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}},"post":{"tags":["Auth"],"summary":"Verify email address","description":"Verify email address with validation code","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string","description":"Email validation code (6 uppercase alphanumeric characters)"}},"required":["code"]}}}},"responses":{"200":{"description":"Email verified successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Email verified successfully"}}}}}},"400":{"description":"Invalid validation code"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/auth/register/id-validation":{"get":{"tags":["Auth"],"summary":"Get ID validation page","description":"Retrieve ID validation information for authenticated user","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"responses":{"200":{"description":"ID validation page","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"ID validation required"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}},"post":{"tags":["Auth"],"summary":"Verify ID documents","description":"Upload and verify ID documents (front and back)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"front_id_card":{"type":"string","format":"binary","description":"Front of ID card (JPEG or PNG image)"},"back_id_card":{"type":"string","format":"binary","description":"Back of ID card (JPEG or PNG image)"}},"required":["front_id_card","back_id_card"]}}}},"responses":{"200":{"description":"ID verified successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"ID verified successfully"}}}}}},"400":{"description":"Invalid file format or missing files"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/auth/login":{"post":{"tags":["Auth"],"summary":"Login user","description":"Authenticate a user with email and password","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","description":"User email address"},"password":{"type":"string","description":"User password (1-255 characters)"}},"required":["email","password"]}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Login successful"},"token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}}}},"400":{"description":"Invalid email or password"},"500":{"description":"Internal Server Error"}}}},"/auth/register":{"post":{"tags":["Auth"],"summary":"Register new user","description":"Create a new user account with email, password, and address","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","description":"User email address (max 100 characters)"},"password":{"type":"string","description":"User password (1-255 characters)"},"password_confirmation":{"type":"string","description":"Password confirmation (must match password)"},"address":{"type":"string","description":"User address (1-255 characters)"}},"required":["email","password","password_confirmation","address"]}}}},"responses":{"201":{"description":"User registered successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"User registered successfully"},"id":{"type":"number","example":1}}}}}},"400":{"description":"Invalid request data or passwords do not match"},"409":{"description":"Email already exists"},"500":{"description":"Internal Server Error"}}}},"/auth/2fa/setup":{"get":{"tags":["Auth"],"summary":"Get 2FA setup information","description":"Retrieve two-factor authentication setup details (QR code and secret)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"responses":{"200":{"description":"2FA setup information","content":{"application/json":{"schema":{"type":"object","properties":{"qrCode":{"type":"string","description":"QR code for authenticator app"},"secret":{"type":"string","description":"Secret key for manual entry"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}},"post":{"tags":["Auth"],"summary":"Verify and enable 2FA","description":"Verify the 2FA code from authenticator app and enable two-factor authentication","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string","description":"Six-digit code from authenticator app"}},"required":["code"]}}}},"responses":{"200":{"description":"2FA enabled successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Two-factor authentication enabled"}}}}}},"400":{"description":"Invalid code"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/auth/2fa/verify":{"post":{"tags":["Auth"],"summary":"Verify 2FA code during login","description":"Verify two-factor authentication code during login process","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string","description":"Six-digit code from authenticator app"}},"required":["code"]}}}},"responses":{"200":{"description":"2FA code verified successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Code verified"}}}}}},"400":{"description":"Invalid code"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/auth/2fa/disable":{"post":{"tags":["Auth"],"summary":"Disable 2FA","description":"Disable two-factor authentication for the authenticated user","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string","description":"Six-digit code from authenticator app for verification"}},"required":["code"]}}}},"responses":{"200":{"description":"2FA disabled successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Two-factor authentication disabled"}}}}}},"400":{"description":"Invalid code"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/auth/verify/member":{"get":{"tags":["Auth"],"summary":"Verify member authentication","description":"Verify that the authenticated user has completed all verification steps (email and ID validation)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"responses":{"200":{"description":"Member verified successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Member verified"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/auth/verify/admin":{"get":{"tags":["Auth"],"summary":"Verify admin access","description":"Verify that the authenticated user has admin privileges","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"responses":{"200":{"description":"Admin privileges verified","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Admin verified"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}}},"/memberRole":{"get":{"tags":["Member Role"],"summary":"Get all member roles","description":"Retrieve a paginated list of all member roles with optional search (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"query","name":"limit","required":true,"schema":{"type":"number"},"description":"Maximum number of roles to retrieve"},{"in":"query","name":"offset","required":true,"schema":{"type":"number"},"description":"Number of roles to skip for pagination"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search query for role name (optional)"}],"responses":{"200":{"$ref":"#/components/responses/MemberRoleList"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}},"post":{"tags":["Member Role"],"summary":"Create a new member role","description":"Create a new member role with the provided name (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Name of the role"}},"required":["name"]}}}},"responses":{"201":{"$ref":"#/components/responses/MemberRoleCreated"},"400":{"description":"Missing required fields"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}},"put":{"tags":["Member Role"],"summary":"Update a member role","description":"Update an existing member role (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"number","description":"ID of the role to update"},"name":{"type":"string","description":"New name for the role"}},"required":["id","name"]}}}},"responses":{"204":{"$ref":"#/components/responses/MemberRoleUpdated"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Member role not found"},"500":{"description":"Internal Server Error"}}}},"/memberRole/{id}":{"get":{"tags":["Member Role"],"summary":"Get a specific member role","description":"Retrieve a single member role by ID (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Member role ID"}],"responses":{"200":{"description":"Member role found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberRole"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Member role not found"},"500":{"description":"Internal Server Error"}}},"delete":{"tags":["Member Role"],"summary":"Delete a member role","description":"Delete an existing member role by ID (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Member role ID to delete"}],"responses":{"204":{"$ref":"#/components/responses/MemberRoleDeleted"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Member role not found"},"409":{"description":"Cannot delete role due to foreign key constraint"},"500":{"description":"Internal Server Error"}}}},"/member":{"get":{"tags":["Member"],"summary":"Get all members","description":"Retrieve a paginated list of all members with optional search (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"query","name":"limit","required":true,"schema":{"type":"number"},"description":"Maximum number of members to retrieve"},{"in":"query","name":"offset","required":true,"schema":{"type":"number"},"description":"Number of members to skip for pagination"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search query for email (optional)"}],"responses":{"200":{"$ref":"#/components/responses/MemberList"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}},"post":{"tags":["Member"],"summary":"Create a new member","description":"Create a new member account (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"apple_id":{"type":"string","description":"Apple ID (nullable)"},"first_name":{"type":"string","description":"First name (letters only, 2-50 characters)"},"last_name":{"type":"string","description":"Last name (letters only, 2-50 characters)"},"email":{"type":"string","description":"Email address"},"email_checked":{"type":"boolean","description":"Email verification status"},"id_checked":{"type":"boolean","description":"ID verification status"},"password":{"type":"string","description":"Account password"},"password_last_update":{"type":"string","format":"date-time","description":"Last password update timestamp"},"address":{"type":"string","description":"Member address"},"birthday":{"type":"string","format":"date-time","description":"Date of birth (nullable)"},"national_registry":{"type":"string","description":"National registry number (15 characters, nullable)"},"created_at":{"type":"string","format":"date-time","description":"Account creation timestamp"},"photo_path":{"type":"string","description":"Profile photo path (nullable)"},"id_role":{"type":"number","description":"Member role ID"},"id_2fa":{"type":"number","description":"Two-factor authentication ID (nullable)"},"id_id_check":{"type":"number","description":"ID check configuration ID (nullable)"},"id_validation_code":{"type":"number","description":"Validation code ID (nullable)"}},"required":["first_name","last_name","email","email_checked","id_checked","password","password_last_update","address","created_at","id_role"]}}}},"responses":{"201":{"$ref":"#/components/responses/MemberCreated"},"400":{"description":"Missing required fields or invalid field format"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"409":{"description":"Conflict - Email or national registry already exists, or invalid role/foreign key reference"},"500":{"description":"Internal Server Error"}}},"put":{"tags":["Member"],"summary":"Update a member","description":"Update an existing member (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"number","description":"Member ID to update"},"apple_id":{"type":"string","description":"Apple ID (nullable)"},"first_name":{"type":"string","description":"First name (letters only, 2-50 characters)"},"last_name":{"type":"string","description":"Last name (letters only, 2-50 characters)"},"email":{"type":"string","description":"Email address"},"email_checked":{"type":"boolean","description":"Email verification status"},"id_checked":{"type":"boolean","description":"ID verification status"},"password":{"type":"string","description":"Account password (optional, send empty string to keep existing)"},"password_last_update":{"type":"string","format":"date-time","description":"Last password update timestamp"},"address":{"type":"string","description":"Member address"},"birthday":{"type":"string","format":"date-time","description":"Date of birth (optional, nullable)"},"national_registry":{"type":"string","description":"National registry number (15 characters, nullable)"},"photo_path":{"type":"string","description":"Profile photo path (nullable)"},"id_role":{"type":"number","description":"Member role ID"},"id_2fa":{"type":"number","description":"Two-factor authentication ID (nullable)"},"id_id_check":{"type":"number","description":"ID check configuration ID (nullable)"},"id_validation_code":{"type":"number","description":"Validation code ID (nullable)"}},"required":["id","first_name","last_name","email","email_checked","id_checked","password_last_update","address","id_role"]}}}},"responses":{"200":{"$ref":"#/components/responses/MemberUpdated"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Member not found"},"409":{"description":"Conflict - Email or national registry already exists, or invalid role/foreign key reference"},"500":{"description":"Internal Server Error"}}}},"/member/me":{"get":{"tags":["Member"],"summary":"Get current user information","description":"Retrieve the current authenticated user's information including profile details","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/AuthUserInfoResponse"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/member/search-for-team":{"get":{"tags":["Member"],"summary":"Search members for team assignment","description":"Search for members who can be added to a team (members in less than 2 teams)","parameters":[{"in":"query","name":"search","required":true,"schema":{"type":"string"},"description":"Search query for first name, last name, or address"}],"responses":{"200":{"$ref":"#/components/responses/MemberList"},"500":{"description":"Internal Server Error"}}}},"/member/{id}":{"get":{"tags":["Member"],"summary":"Get a specific member","description":"Retrieve a single member by ID (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Member ID"}],"responses":{"200":{"description":"Member found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Member"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Member not found"},"500":{"description":"Internal Server Error"}}},"delete":{"tags":["Member"],"summary":"Delete a member","description":"Delete a member by ID (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Member ID to delete"}],"responses":{"200":{"$ref":"#/components/responses/MemberDeleted"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Member not found"},"500":{"description":"Internal Server Error"}}}},"/member/password/reset":{"post":{"tags":["Member"],"summary":"Reset member password","description":"Send a password reset email to a member","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","description":"Email address of the member"}},"required":["email"]}}}},"responses":{"200":{"description":"Password reset email sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Password reset email sent"}}}}}},"400":{"description":"Invalid email format"},"500":{"description":"Internal Server Error"}}}},"/member/password/change":{"post":{"tags":["Member"],"summary":"Change member password","description":"Change the password for an authenticated member","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"current_password":{"type":"string","description":"Current password (1-255 characters)"},"new_password":{"type":"string","description":"New password (1-255 characters)"},"new_password_confirmation":{"type":"string","description":"New password confirmation (must match new_password)"}},"required":["current_password","new_password","new_password_confirmation"]}}}},"responses":{"200":{"description":"Password changed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Password changed successfully"}}}}}},"400":{"description":"Invalid request data or passwords do not match"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/member/password/verify":{"post":{"tags":["Member"],"summary":"Verify member password","description":"Verify the current password for an authenticated member","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string","description":"Password to verify (1-255 characters)"}},"required":["password"]}}}},"responses":{"200":{"description":"Password verified successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Password verified"}}}}}},"400":{"description":"Invalid password"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/report":{"get":{"tags":["Report"],"summary":"Get all reports","description":"Retrieve a paginated list of all reports with optional search","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"query","name":"limit","required":true,"schema":{"type":"number"},"description":"Maximum number of reports to retrieve"},{"in":"query","name":"offset","required":true,"schema":{"type":"number"},"description":"Number of reports to skip for pagination"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search query for street name (optional)"}],"responses":{"200":{"$ref":"#/components/responses/ReportList"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}},"post":{"tags":["Report"],"summary":"Create a new report","description":"Create a new danger report with optional photo","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"date":{"type":"string","format":"date-time","description":"Report date (optional, defaults to current date). Admin only."},"lat":{"type":"number","description":"Latitude of the danger location"},"lng":{"type":"number","description":"Longitude of the danger location"},"street":{"type":"string","description":"Street address of the danger (1-255 characters)"},"level":{"type":"number","description":"Danger level (integer)"},"is_public":{"type":"boolean","description":"Whether the report is public or team-only"},"for_police":{"type":"boolean","description":"Whether the report should be sent to police"},"id_member":{"type":"number","description":"Member ID who created the report (optional, defaults to current user). Admin only."},"id_type_danger":{"type":"number","description":"Type of danger ID"},"file":{"type":"string","format":"binary","description":"Photo of the danger (optional)"}},"required":["lat","lng","street","level","is_public","for_police","id_type_danger"]}}}},"responses":{"201":{"$ref":"#/components/responses/ReportCreated"},"400":{"description":"Invalid request data or missing required fields"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"409":{"description":"Conflict - Invalid type danger or member reference"},"500":{"description":"Internal Server Error"}}},"put":{"tags":["Report"],"summary":"Update a report","description":"Update an existing report","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"number","description":"Report ID to update"},"date":{"type":"string","format":"date-time","description":"Report date"},"lat":{"type":"number","description":"Latitude of the danger location"},"lng":{"type":"number","description":"Longitude of the danger location"},"street":{"type":"string","description":"Street address of the danger (1-255 characters)"},"level":{"type":"number","description":"Danger level (integer)"},"is_public":{"type":"boolean","description":"Whether the report is public or team-only"},"for_police":{"type":"boolean","description":"Whether the report should be sent to police"},"photo_path":{"type":"string","description":"Photo path (optional, nullable)"},"id_member":{"type":"number","description":"Member ID who created the report"},"id_type_danger":{"type":"number","description":"Type of danger ID"}},"required":["id","date","lat","lng","street","level","is_public","for_police","id_member","id_type_danger"]}}}},"responses":{"200":{"$ref":"#/components/responses/ReportUpdated"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Report not found"},"409":{"description":"Conflict - Invalid type danger or member reference"},"500":{"description":"Internal Server Error"}}}},"/report/forUser":{"get":{"tags":["Report"],"summary":"Get reports for current user","description":"Retrieve all reports created by the authenticated user","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/ReportList"},"401":{"description":"User not authenticated"},"500":{"description":"Internal Server Error"}}}},"/report/{id}":{"get":{"tags":["Report"],"summary":"Get a specific report","description":"Retrieve a single report by ID","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Report ID"}],"responses":{"200":{"description":"Report found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Report"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Report not found"},"500":{"description":"Internal Server Error"}}},"delete":{"tags":["Report"],"summary":"Delete a report","description":"Delete a report by ID","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Report ID to delete"}],"responses":{"200":{"$ref":"#/components/responses/ReportDeleted"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Report not found"},"409":{"description":"Conflict - Cannot delete report due to foreign key constraint"},"500":{"description":"Internal Server Error"}}}},"/team-member":{"get":{"tags":["Team Member"],"summary":"Get all team members","description":"Retrieve a paginated list of all team members with optional search (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"query","name":"limit","required":true,"schema":{"type":"number"},"description":"Maximum number of team members to retrieve"},{"in":"query","name":"offset","schema":{"type":"number"},"description":"Number of team members to skip for pagination (optional)"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search query (optional)"}],"responses":{"200":{"$ref":"#/components/responses/TeamMemberList"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Failed to fetch team members"}}},"post":{"tags":["Team Member"],"summary":"Add a member to a team","description":"Add a new member to an existing team (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id_team":{"type":"number","description":"Team ID"},"id_member":{"type":"number","description":"Member ID to add to the team"},"accepted":{"type":"boolean","description":"Whether the member has accepted the team invitation"}},"required":["id_team","id_member","accepted"]}}}},"responses":{"201":{"description":"Team member created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Team member created successfully"}}}}}},"400":{"description":"Invalid request data or error creating team member"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Failed to create team member"}}},"put":{"tags":["Team Member"],"summary":"Update a team member","description":"Update a team member's acceptance status (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"number","description":"Team member ID to update"},"accepted":{"type":"boolean","description":"New acceptance status"}},"required":["id","accepted"]}}}},"responses":{"200":{"description":"Team member updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Team member updated successfully"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Team member not found"},"500":{"description":"Failed to update team member"}}}},"/team-member/{id}":{"delete":{"tags":["Team Member"],"summary":"Remove a member from a team","description":"Delete a team member entry (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Team member ID to delete"}],"responses":{"200":{"description":"Team member deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Team member deleted successfully"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Failed to delete team member"}}}},"/team":{"get":{"tags":["Team"],"summary":"Get all teams","description":"Retrieve a paginated list of all teams with optional search (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"query","name":"limit","required":true,"schema":{"type":"number"},"description":"Maximum number of teams to retrieve"},{"in":"query","name":"offset","required":true,"schema":{"type":"number"},"description":"Number of teams to skip for pagination"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search query for team name (optional)"}],"responses":{"200":{"$ref":"#/components/responses/TeamList"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}},"post":{"tags":["Team"],"summary":"Create a new team","description":"Create a new team with members (requires admin).","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"oneOf":[{"type":"object","title":"Admin Request","properties":{"name":{"type":"string","description":"Team name (3-100 characters)"},"id_member":{"type":"number","description":"Member ID who will be the team admin"},"team_member":{"type":"array","items":{"type":"object","properties":{"id_member":{"type":"number"},"accepted":{"type":"boolean"}}},"description":"Array of team members (optional)"}},"required":["name","id_member"]},{"type":"object","title":"User Request","properties":{"name":{"type":"string","description":"Team name (3-100 characters)"},"team_member":{"type":"array","items":{"type":"object","properties":{"member":{"type":"number"},"accepted":{"type":"boolean"}}},"description":"Array of team members (optional)"}},"required":["name"]}]}}}},"responses":{"201":{"description":"Team created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Team"}}}},"400":{"description":"Invalid request data or missing required fields"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}},"put":{"tags":["Team"],"summary":"Update a team","description":"Update an existing team (requires admin).","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"oneOf":[{"type":"object","title":"Admin Request","properties":{"id":{"type":"number","description":"Team ID to update"},"name":{"type":"string","description":"Team name (3-100 characters)"},"id_member":{"type":"number","description":"Team admin member ID"},"id_report":{"type":"number","nullable":true,"description":"Report ID associated with team (optional)"},"team_member":{"type":"array","items":{"type":"object","properties":{"id_member":{"type":"number"},"accepted":{"type":"boolean"}}},"description":"Array of team members (optional)"}},"required":["id","name","id_member"]},{"type":"object","title":"User Request (Team Admin)","properties":{"id":{"type":"number","description":"Team ID to update"},"name":{"type":"string","description":"Team name (3-100 characters)"},"id_member":{"type":"number","description":"Team admin member ID"},"id_report":{"type":"number","nullable":true,"description":"Report ID associated with team (optional)"},"team_member":{"type":"array","items":{"type":"object","properties":{"id_member":{"type":"number"},"accepted":{"type":"boolean"}}},"description":"Array of team members (optional)"}},"required":["id","name","id_member"]}]}}}},"responses":{"200":{"description":"Team updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Team"}}}},"400":{"description":"Invalid request data or foreign key constraint violation"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Team not found"},"500":{"description":"Internal Server Error"}}}},"/team/me":{"get":{"tags":["Team"],"summary":"Get current user's teams","description":"Retrieve a paginated list of teams that the authenticated user is a member of","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"query","name":"limit","required":true,"schema":{"type":"number"},"description":"Maximum number of teams to retrieve"}],"responses":{"200":{"$ref":"#/components/responses/TeamList"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/team/{id}":{"get":{"tags":["Team"],"summary":"Get a specific team","description":"Retrieve a single team by ID (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Team ID"}],"responses":{"200":{"description":"Team found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Team"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Team not found"},"500":{"description":"Internal Server Error"}}},"delete":{"tags":["Team"],"summary":"Delete a team","description":"Delete a team by ID (requires admin).","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Team ID to delete"}],"responses":{"204":{"description":"Team deleted successfully"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Team not found"},"500":{"description":"Internal Server Error"}}}},"/two-factor":{"get":{"tags":["Two-Factor Authentication"],"summary":"Get all two-factor authentication entries","description":"Retrieve a paginated list of all 2FA configurations with optional search (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"query","name":"limit","required":true,"schema":{"type":"number"},"description":"Maximum number of entries to retrieve"},{"in":"query","name":"offset","required":true,"schema":{"type":"number"},"description":"Number of entries to skip for pagination"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search query (optional)"}],"responses":{"200":{"$ref":"#/components/responses/TwoFactorList"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}},"post":{"tags":["Two-Factor Authentication"],"summary":"Create a 2FA configuration","description":"Create a new two-factor authentication configuration (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"secret_key":{"type":"string","description":"Secret key for 2FA (16-500 characters)"},"is_enabled":{"type":"boolean","description":"Whether this 2FA configuration is enabled"}},"required":["secret_key","is_enabled"]}}}},"responses":{"201":{"description":"2FA configuration created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Two-Factor Authentication entry created successfully"}}}}}},"400":{"description":"Missing required fields or invalid field format"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}},"put":{"tags":["Two-Factor Authentication"],"summary":"Update a 2FA configuration","description":"Update an existing two-factor authentication configuration (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"number","description":"2FA configuration ID to update"},"secret_key":{"type":"string","description":"Secret key for 2FA (16-500 characters, optional)"},"is_enabled":{"type":"boolean","description":"Whether this 2FA configuration is enabled"}},"required":["id","is_enabled"]}}}},"responses":{"200":{"description":"2FA configuration updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Two-Factor Authentication entry updated successfully"}}}}}},"400":{"description":"Missing required fields or invalid field format"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}}},"/two-factor/{id}":{"get":{"tags":["Two-Factor Authentication"],"summary":"Get a specific 2FA configuration","description":"Retrieve a single 2FA configuration by ID (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"2FA configuration ID"}],"responses":{"200":{"description":"2FA configuration found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFactor"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Two-Factor Authentication entry not found"},"500":{"description":"Internal Server Error"}}},"delete":{"tags":["Two-Factor Authentication"],"summary":"Delete a 2FA configuration","description":"Delete a two-factor authentication configuration by ID (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"2FA configuration ID to delete"}],"responses":{"200":{"description":"2FA configuration deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Two-Factor Authentication entry deleted successfully"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}}},"/typeDanger":{"get":{"tags":["Type Danger"],"summary":"Get all danger types","description":"Retrieve a paginated list of all danger types with optional search","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"query","name":"limit","required":true,"schema":{"type":"number"},"description":"Maximum number of types to retrieve"},{"in":"query","name":"offset","required":true,"schema":{"type":"number"},"description":"Number of types to skip for pagination"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search query for danger type name (optional)"}],"responses":{"200":{"$ref":"#/components/responses/TypeDangerList"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}},"post":{"tags":["Type Danger"],"summary":"Create a new danger type","description":"Create a new danger type classification","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Name of the danger type (3-50 characters)"},"icon":{"type":"string","description":"Icon/emoji for the danger type (1-255 characters)"},"is_used":{"type":"boolean","description":"Whether this danger type is being used"}},"required":["name","icon","is_used"]}}}},"responses":{"201":{"description":"Danger type created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Danger type created successfully"}}}}}},"400":{"description":"Missing required fields or invalid field format"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}},"put":{"tags":["Type Danger"],"summary":"Update a danger type","description":"Update an existing danger type","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"number","description":"Danger type ID to update"},"name":{"type":"string","description":"Name of the danger type (3-50 characters)"},"icon":{"type":"string","description":"Icon/emoji for the danger type (1-255 characters)"},"is_used":{"type":"boolean","description":"Whether this danger type is being used"}},"required":["id","name","icon","is_used"]}}}},"responses":{"204":{"description":"Danger type updated successfully"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Danger type not found"},"500":{"description":"Internal Server Error"}}}},"/typeDanger/used":{"get":{"tags":["Type Danger"],"summary":"Get used danger types","description":"Retrieve all danger types that have been used in reports","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/TypeDangerList"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Internal Server Error"}}}},"/typeDanger/{id}":{"get":{"tags":["Type Danger"],"summary":"Get a specific danger type","description":"Retrieve a single danger type by ID","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Danger type ID"}],"responses":{"200":{"description":"Danger type found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TypeDanger"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"TypeDanger not found"},"500":{"description":"Internal Server Error"}}},"delete":{"tags":["Type Danger"],"summary":"Delete a danger type","description":"Delete a danger type by ID","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Danger type ID to delete"}],"responses":{"204":{"description":"Danger type deleted successfully"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Danger type not found"},"409":{"description":"Conflict - Cannot delete danger type due to foreign key constraint"},"500":{"description":"Internal Server Error"}}}},"/validation-code":{"get":{"tags":["Validation Code"],"summary":"Get all validation codes","description":"Retrieve a paginated list of all validation codes with optional search (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"query","name":"limit","required":true,"schema":{"type":"number"},"description":"Maximum number of codes to retrieve"},{"in":"query","name":"offset","required":true,"schema":{"type":"number"},"description":"Number of codes to skip for pagination"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search query (optional)"}],"responses":{"200":{"$ref":"#/components/responses/ValidationCodeList"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}},"post":{"tags":["Validation Code"],"summary":"Create a validation code","description":"Create a new validation code for email or ID verification (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"code_hash":{"type":"string","description":"The validation code (6 characters)"},"expires_at":{"type":"string","format":"date-time","description":"Expiration timestamp for the code"},"attempts":{"type":"number","description":"Number of validation attempts allowed (>= 0)"}},"required":["code_hash","expires_at","attempts"]}}}},"responses":{"201":{"description":"Validation code created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Validation code created successfully"}}}}}},"400":{"description":"Missing required fields or invalid field format"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"500":{"description":"Internal Server Error"}}},"put":{"tags":["Validation Code"],"summary":"Update a validation code","description":"Update an existing validation code (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"number","description":"Validation code ID to update"},"code_hash":{"type":"string","description":"The validation code (6 characters, optional)"},"expires_at":{"type":"string","format":"date-time","description":"Expiration timestamp for the code"},"attempts":{"type":"number","description":"Number of validation attempts allowed (>= 0)"}},"required":["id","expires_at","attempts"]}}}},"responses":{"200":{"description":"Validation code updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Validation code updated successfully"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Validation code not found"},"500":{"description":"Internal Server Error"}}}},"/validation-code/{id}":{"get":{"tags":["Validation Code"],"summary":"Get a specific validation code","description":"Retrieve a single validation code by ID (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Validation code ID"}],"responses":{"200":{"description":"Validation code found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationCode"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Validation code not found"},"500":{"description":"Internal Server Error"}}},"delete":{"tags":["Validation Code"],"summary":"Delete a validation code","description":"Delete a validation code by ID (requires admin)","security":[{"bearerAuth":[]},{"cookieAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"Validation code ID to delete"}],"responses":{"200":{"description":"Validation code deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Validation code deleted successfully"}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"Forbidden"},"404":{"description":"Validation code not found"},"409":{"description":"Conflict - Cannot delete validation code due to foreign key constraint"},"500":{"description":"Internal Server Error"}}}}},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"JWT token in Authorization header"},"cookieAuth":{"type":"apiKey","in":"cookie","name":"token","description":"JWT token in cookie"}},"schemas":{"MemberRole":{"type":"object","properties":{"id":{"type":"number","example":1},"name":{"type":"string","example":"Admin"}}},"Member":{"type":"object","properties":{"id":{"type":"number","example":1},"apple_id":{"type":"string","nullable":true,"example":"com.apple.123456"},"first_name":{"type":"string","nullable":true,"example":"John"},"last_name":{"type":"string","nullable":true,"example":"Doe"},"email":{"type":"string","example":"john.doe@example.com"},"email_checked":{"type":"boolean","example":true},"id_checked":{"type":"boolean","example":false},"password_last_update":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00Z"},"address":{"type":"string","example":"123 Main St, City"},"birthday":{"type":"string","format":"date-time","nullable":true,"example":"1990-05-20"},"national_registry":{"type":"string","nullable":true,"example":"90052012345678"},"created_at":{"type":"string","format":"date-time","example":"2024-01-10T08:00:00Z"},"photo_path":{"type":"string","nullable":true,"example":"profile/user_1_profile.jpg"},"role":{"type":"number","nullable":false,"example":1},"twoFA":{"type":"number","nullable":true,"example":1},"id_check":{"type":"number","nullable":true,"example":1},"validation_code":{"type":"number","nullable":true,"example":1}}},"AuthUserInfo":{"type":"object","properties":{"id":{"type":"number","example":1},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"address":{"type":"string","example":"123 Main St, City"},"photoName":{"type":"string","nullable":true,"example":"user_1_profile.jpg"},"photoPath":{"type":"string","nullable":true,"example":"http://localhost:3000/profiles/user_1_profile.jpg"},"email":{"type":"string","example":"john.doe@example.com"},"emailVerified":{"type":"boolean","example":true},"idVerified":{"type":"boolean","example":false},"twoFactorEnabled":{"type":"boolean","example":true},"twoFactorValidated":{"type":"boolean","example":true}}},"Report":{"type":"object","properties":{"id":{"type":"number","example":1},"date":{"type":"string","format":"date-time","example":"2024-01-20T14:30:00Z"},"lat":{"type":"number","example":50.8503},"lng":{"type":"number","example":4.3517},"street":{"type":"string","example":"123 Brussels Street, Belgium"},"level":{"type":"number","example":3},"is_public":{"type":"boolean","example":true},"for_police":{"type":"boolean","example":false},"photo_path":{"type":"string","nullable":true,"example":"reports/12345678-1234-5678-1234-567812345678.jpeg"},"member":{"type":"number","example":1},"type_danger":{"type":"number","example":2}}},"TeamMember":{"type":"object","properties":{"id":{"type":"number","example":1},"accepted":{"type":"boolean","example":true},"team":{"type":"number","nullable":true,"example":1},"member":{"type":"number","example":5}}},"Team":{"type":"object","properties":{"id":{"type":"number","example":1},"name":{"type":"string","example":"Team Alpha"},"admin":{"type":"number","example":5},"report":{"type":"number","nullable":true,"example":10}}},"TwoFactor":{"type":"object","properties":{"id":{"type":"number","example":1},"secret_key":{"type":"string","example":"JBSWY3DPEBLW64TMMQ======"},"is_enabled":{"type":"boolean","example":true},"created_at":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00Z"}}},"TypeDanger":{"type":"object","properties":{"id":{"type":"number","example":1},"name":{"type":"string","example":"Assault"},"icon":{"type":"string","example":"assault.fill"},"is_used":{"type":"boolean","example":true}}},"ValidationCode":{"type":"object","properties":{"id":{"type":"number","example":1},"code_hash":{"type":"string","example":"$2b$10$9Ot3DuUqKjrI0z8Q5Sm6Zu9KxY1zL2aB3cD4eF5gH6iJ7kL8mN9oP"},"expires_at":{"type":"string","format":"date-time","example":"2024-01-20T10:30:00Z"},"attempts":{"type":"number","example":3}}}},"responses":{"MemberRoleCreated":{"description":"Member role created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Member role created successfully"}}}}}},"MemberRoleUpdated":{"description":"Member role updated successfully"},"MemberRoleDeleted":{"description":"Member role deleted successfully"},"MemberRoleList":{"description":"List of member roles","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MemberRole"}}}}},"UnauthorizedError":{"description":"Unauthorized - missing or invalid JWT token"},"MemberList":{"description":"List of members","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Member"}}}}},"MemberCreated":{"description":"Member created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Member created"}}}}}},"MemberUpdated":{"description":"Member updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Member updated successfully"}}}}}},"MemberDeleted":{"description":"Member deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Member deleted successfully"}}}}}},"AuthUserInfoResponse":{"description":"Current user information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthUserInfo"}}}},"ReportList":{"description":"List of reports","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Report"}}}}},"ReportCreated":{"description":"Report created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Report created"},"reportId":{"type":"number","example":1}}}}}},"ReportUpdated":{"description":"Report updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Report updated"}}}}}},"ReportDeleted":{"description":"Report deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Report deleted successfully"}}}}}},"TeamMemberList":{"description":"List of team members","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TeamMember"}}}}},"TeamList":{"description":"List of teams","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Team"}}}}},"TwoFactorList":{"description":"List of 2FA configurations","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TwoFactor"}}}}},"TypeDangerList":{"description":"List of danger types","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TypeDanger"}}}}},"ValidationCodeList":{"description":"List of validation codes","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ValidationCode"}}}}}}},"tags":[]}